{{ block title }}
    Information
{{ endblock }}
{{ block content }}

{{ formfield_errors 'bi' }}
{{ formfield_errors 'bj' }}

<p>
    You receive {{ if player.kudos }}{{ else }}no{{ endif }} kudos.
</p>

<p>
    Your partner receives {{ if partner_kudos }}{{ else }}no{{ endif }} kudos.
</p>

<p>
    Please evaluate how likely the following statements are true. At the end of the experiment we will evaluate for each statement whether it is true and for each statement you may win a prize of {{ group.beliefs_payoff }}. The exact probability of winning a prize depends on your guess and whether the statement turns out to be true. If the statement is true, your probability of winning the prize is equal to 1 - (1 - guess)². If the statement is false, your probability of winning the prize is equal to 1 - guess².
</p>
<p>
    To maximize the probability of earning the prize you should state your best guess how likely the statements are true. 
</p>

<div style="margin:10px">

    <table id="beliefs-choices" class="table">
    <tr style="border-top:2px solid black">
        <td></td>
        <td></td>
        <td colspan="2" style="border-bottom:1px solid black">Your chance of winning {{ group.beliefs_payoff }} </td>
    </tr>

    <tr style="border-bottom:1px solid black">
        <td>Statement</td>
        <td>Your guess</td>
        <td>if the statement is true</td>
        <td>if the statement is not true</td>
    </tr>



    <tr>
        <td style="width: 450px">
            <label for="bi">I am a high type.</label>
            <div class="input-group" style="width: 80%; margin-left: auto; margin-right: auto">
                <span class="input-group-text">0%</span>
                <input type="range" name="bi" id="bi" min="0" max="1" step="0.01" class="slider">
                <span class="input-group-text">100%</span>
            </div>
        </td>

        <td>
            <span id="bi_guess"></span>
        </td>

        <td>
            <span id="bi_typeH"></span>
        </td>

        <td>
            <span id="bi_typeL"></span>
        </td>
    </tr>

    <tr style="border-bottom:2px solid black">
        <td style="width: 450px">
            <label for="bj_ability">My partner is a high type.</label>
            <div class="input-group" style="width: 80%; margin-left: auto; margin-right: auto">
                <span class="input-group-text">0%</span>
                <input type="range" name="bj" id="bj" min="0" max="1" step="0.01" class="slider">
                <span class="input-group-text">100%</span>
            </div>
        </td>

        <td>
            <span id="bj_guess"></span>
        </td>

        <td>
            <span id="bj_typeH"></span>
        </td>

        <td>
            <span id="bj_typeL"></span>
        </td>
    </tr>

</table>
</div>

<div>
    <button id="next_button" class="btn btn-primary btn-large" style="visibility: hidden">Next</button>
</div>


{{ endblock }}

{{ block scripts }}
<script>
    const sliders = document.querySelectorAll('.slider')
    const next_button = document.getElementById("next_button")

    window.onload = function() {
        let i
        for (i = 0; i < sliders.length; i++) {
            sliders[i].ID = i;
            sliders[i].addEventListener('input', slider_click);
            sliders[i].addEventListener('change', slider_click);
            sliders[i].clicked = 0;
        }
    }

    function slider_click() {
        this.style.setProperty('--SliderWidth', '10px')
        this.clicked = 1
        let num_clicked = 0
        let i
        for (i = 0; i < sliders.length; i++) {
            num_clicked += sliders[i].clicked
        }
        if (num_clicked === 2) {
            next_button.style.visibility = "visible"
        }

        let guess = (this.value * 100).toFixed(0);

        let chanceH = ((1 - Math.pow((1 - this.value), 2)) * 100).toFixed(2);
        let chanceL = ((1 - Math.pow(this.value, 2)) * 100).toFixed(2);

        document.getElementById(this.id.concat("_guess")).innerHTML = guess.concat("%")
        document.getElementById(this.id.concat("_typeH")).innerHTML = chanceH.concat("%")
        document.getElementById(this.id.concat("_typeL")).innerHTML = chanceL.concat("%")

    }

</script>
{{ endblock }}


{{ block styles }}
<style>
    .slider {
        -webkit-appearance: none;
        --SliderWidth: 0px;
        margin: 0 0;
    }

    .slider:focus {
        outline: none;
    }

    .slider::-webkit-slider-runnable-track {
        width: 100%;
        height: 100%;
        cursor: pointer;
        box-shadow: 0 0 0 #000000, 0 0 0 #0d0d0d;
        background: lightgray;
        border-radius: 0;
        border: 0 solid #000101;
    }

    .slider::-webkit-slider-thumb {
        box-shadow: 0 0 0 #000000, 0 0 0 #0d0d0d;
        border: 0 solid #000000;
        height: 100%;
        width: var(--SliderWidth);
        border-radius: 0;
        background: black;
        cursor: pointer;
        -webkit-appearance: none;
        margin-top: 0px;
    }

    .slider:focus::-webkit-slider-runnable-track {
        background: lightgray;
    }

    .slider::-moz-range-track {
        width: 100%;
        height: 100%;
        cursor: pointer;
        box-shadow: 0 0 0 #000000, 0 0 0 #0d0d0d;
        background: lightgray;
        border-radius: 0;
        border: 0 solid #000101;
    }

    .slider::-moz-range-thumb {
        box-shadow: 0 0 0 #000000, 0 0 0 #0d0d0d;
        border: 0 solid #000000;
        height: 100%;
        width: var(--SliderWidth);
        border-radius: 0;
        background: black;
        cursor: pointer;
    }

    .slider::-ms-track {
        width: 100%;
        height: 100%;
        cursor: pointer;
        background: lightgray;
        border-color: transparent;
        border-width: 39px 0;
        color: transparent;
    }

    .slider::-ms-fill-lower {
        background: lightgray;
        border: 0 solid #000101;
        border-radius: 0;
        box-shadow: 0 0 0 #000000, 0 0 0 #0d0d0d;
    }

    .slider::-ms-fill-upper {
        background: lightgray;
        border: 0 solid #000101;
        border-radius: 0;
        box-shadow: 0 0 0 #000000, 0 0 0 #0d0d0d;
    }

    .slider::-ms-thumb {
        box-shadow: 0 0 0 #000000, 0 0 0 #0d0d0d;
        border: 0 solid #000000;
        height: 100%;
        width: var(--SliderWidth);
        border-radius: 0;
        background: black;
        cursor: pointer;
    }

    .slider:focus::-ms-fill-lower {
        background: lightgray;
    }

    .slider:focus::-ms-fill-upper {
        background:lightgray;
    }

body {
    padding: 30px;
}
</style>

<style>
td
{
    padding: 5px 15px;
    text-align: center;
    vertical-align: middle;
}

</style>

<style>
    #information-overview {
    width: 300px;
    float: right;
}
</style>


{{ endblock }}
